{"ast":null,"code":"import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"flex justify-center items-center min-h-screen bg-grey-300\"\n};\nconst _hoisted_2 = {\n  style: {\n    \"margin-top\": \"180px\"\n  }\n};\nconst _hoisted_3 = [\"width\", \"height\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"canvas\", {\n    id: \"gameCanvas\",\n    width: $data.canvasWidth,\n    height: $data.canvasHeight,\n    class: \"flex justify-end\"\n  }, null, 8 /* PROPS */, _hoisted_3)])]);\n}","map":{"version":3,"names":["class","style","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","id","width","$data","canvasWidth","height","canvasHeight","_hoisted_3"],"sources":["/home/antiphy/ITU/ITU_project/src/views/GameScreen.vue"],"sourcesContent":["<!-- <template>\n\n    <div class=\"flex justify-center items-center min-h-screen bg-grey-300\">\n        <div style=\"margin-top: 180px;\">\n            <canvas id=\"gameCanvas\" :width=\"canvasWidth\" :height=\"canvasHeight\" class=\"flex justify-end\"></canvas>\n        </div>\n    </div>\n\n\n  </template>\n  \n  <script>\n  export default {\n    name: 'GameScreen',\n    data() {\n      return {\n        canvasWidth: 1920,  // Width of the canvas\n        canvasHeight: 900, // Height of the canvas\n        map: [], // 2D Array for the terrain\n        tank: null,\n        tankX: 100, // Initial X position of the tank\n        tankY: 505, // Initial Y position of the tank\n      };\n    },\n    mounted() {\n        this.initializeMap();\n        this.loadTankImage();\n        window.addEventListener('keydown', this.handleKeyDown); // Listen for keydown events\n    },\n    beforeUnmount() {\n        window.removeEventListener('keydown', this.handleKeyDown); // Clean up the event listener\n    },\n    methods: {\n        loadTankImage() {\n            this.tankImage = new Image();\n            this.tankImage.src = '/assets/tank.png'; // Replace with your SVG path\n\n            // Wait for the image to load before drawing the map\n            this.tankImage.onload = () => {\n                this.drawMap(); // Draw the map after the tank image has loaded\n            };\n        },\n\n        // Initialize the map with ground and sky\n        initializeMap() {\n            const groundLevel = 550; // Set ground level in pixels\n            \n            // Create a 2D array (matrix) representing the map\n            this.map = Array(this.canvasHeight).fill().map((_, y) => \n                Array(this.canvasWidth).fill().map(() => (y >= groundLevel ? 1 : 0))\n            );\n        },\n\n\n    // Draw the map using canvas\n        drawMap() {\n            const canvas = document.getElementById('gameCanvas');\n            const ctx = canvas.getContext('2d');\n            \n            ctx.clearRect(0, 0, this.canvasWidth, this.canvasHeight);\n\n            // Loop through the map array and draw each pixel\n            for (let y = 0; y < this.map.length; y++) {\n                for (let x = 0; x < this.map[y].length; x++) {\n                    ctx.fillStyle = this.map[y][x] === 1 ? 'green': 'skyblue'; // Set color based on terrain\n                    ctx.fillRect(x, y, 1, 1); // Draw each pixel/block\n                }\n            }\n\n            ctx.drawImage(this.tankImage, this.tankX, this.tankY, 75, 45); // Adjust width and height as needed\n        },\n\n        handleKeyDown(event) {\n            const step = 10; // Number of pixels to move the tank\n\n            switch (event.key) {\n                case 'ArrowLeft':\n                    this.tankX -= step; // Move left\n                    break;\n                case 'ArrowRight':\n                    this.tankX += step; // Move right\n                    break;\n            }\n\n            // Ensure the tank stays within the canvas boundaries\n            if (this.tankX < 0) this.tankX = 0; // Prevent moving out of bounds to the left\n            if (this.tankX > this.canvasWidth - 50) this.tankX = this.canvasWidth - 50; // Prevent moving out of bounds to the right\n\n            this.drawMap(); // Redraw the map with the updated tank position\n        },\n    }\n  };\n  </script>\n  \n  <style scoped>\n\n    .row {\n    display: flex;\n    }\n\n    .pixel {\n    width: 1px;\n    height: 1px;\n    }\n</style> -->\n\n<template>\n    <div class=\"flex justify-center items-center min-h-screen bg-grey-300\">\n        <div style=\"margin-top: 180px;\">\n            <canvas id=\"gameCanvas\" :width=\"canvasWidth\" :height=\"canvasHeight\" class=\"flex justify-end\"></canvas>\n        </div>\n    </div>\n</template>\n\n<script>\nexport default {\n    name: 'GameScreen',\n    data() {\n        return {\n            canvasWidth: 1920,  // Width of the canvas\n            canvasHeight: 900, // Height of the canvas\n            map: [], // 2D Array for the terrain\n            tankImage: null, // To store the loaded tank image\n            tankX: 100, // Initial X position of the tank\n            tankY: 505, // Initial Y position of the tank\n            moveLeft: false, // Flag for moving left\n            moveRight: false, // Flag for moving right\n            gameLoop: null, // Reference to the game loop\n            step: 20, // Number of pixels to move the tank each frame\n        };\n    },\n    mounted() {\n        this.loadTankImage(); // Load the tank image\n        this.initializeMap();\n        window.addEventListener('keydown', this.handleKeyDown); // Listen for keydown events\n        window.addEventListener('keyup', this.handleKeyUp); // Listen for keyup events\n        this.startMovementLoop(); // Start the game loop\n    },\n    beforeUnmount() {\n        window.removeEventListener('keydown', this.handleKeyDown); // Clean up the event listener\n        window.removeEventListener('keyup', this.handleKeyUp); // Clean up the event listener\n        clearInterval(this.intervalId); // Stop the movement loop\n    },\n    methods: {\n        loadTankImage() {\n            this.tankImage = new Image();\n            this.tankImage.src = 'assets/tank.png'; // Replace with your SVG path\n\n            // Wait for the image to load before drawing the map\n            this.tankImage.onload = () => {\n                this.drawMap(); // Draw the map after the tank image has loaded\n            };\n        },\n\n        initializeMap() {\n            const groundLevel = 550; // Set ground level in pixels\n            \n            // Create a 2D array (matrix) representing the map\n            this.map = Array(this.canvasHeight).fill().map((_, y) => \n                Array(this.canvasWidth).fill().map(() => (y >= groundLevel ? 1 : 0))\n            );\n        },\n\n        drawMap() {\n            const canvas = document.getElementById('gameCanvas');\n            const ctx = canvas.getContext('2d');\n            \n            // Clear the canvas\n            ctx.clearRect(0, 0, this.canvasWidth, this.canvasHeight);\n\n            // Loop through the map array and draw each pixel\n            for (let y = 0; y < this.map.length; y++) {\n                for (let x = 0; x < this.map[y].length; x++) {\n                    ctx.fillStyle = this.map[y][x] === 1 ? 'green' : 'skyblue'; // Set color based on terrain\n                    ctx.fillRect(x, y, 1, 1); // Draw each pixel/block\n                }\n            }\n\n            // Draw the tank at its current position\n            ctx.drawImage(this.tankImage, this.tankX, this.tankY, 75, 45); // Adjust width and height as needed\n        },\n\n        handleKeyDown(event) {\n            switch (event.key) {\n                case 'ArrowLeft':\n                    this.moveLeft = true; // Set flag to move left\n                    break;\n                case 'ArrowRight':\n                    this.moveRight = true; // Set flag to move right\n                    break;\n            }\n        },\n\n        handleKeyUp(event) {\n            switch (event.key) {\n                case 'ArrowLeft':\n                    this.moveLeft = false; // Clear flag to stop moving left\n                    break;\n                case 'ArrowRight':\n                    this.moveRight = false; // Clear flag to stop moving right\n                    break;\n            }\n        },\n\n        startMovementLoop() {\n            this.intervalId = setInterval(() => {\n                // Check movement flags and update tank position\n                if (this.moveLeft) {\n                    this.tankX -= this.step; // Move left\n                }\n                if (this.moveRight) {\n                    this.tankX += this.step; // Move right\n                }\n\n                // Ensure the tank stays within the canvas boundaries\n                if (this.tankX < 0) this.tankX = 0; // Prevent moving out of bounds to the left\n                if (this.tankX > this.canvasWidth - 50) this.tankX = this.canvasWidth - 50; // Prevent moving out of bounds to the right\n\n                this.drawMap(); // Redraw the map with the updated tank position\n            }, 16); // Adjust this value for smoother or slower movement (16 ms ~ 60 FPS)\n        },\n    }\n};\n</script>\n\n<style scoped>\n.row {\n    display: flex;\n}\n.pixel {\n    width: 10px;\n    height: 10px;\n}\n</style>\n"],"mappings":";;EA2GSA,KAAK,EAAC;AAA2D;;EAC7DC,KAA0B,EAA1B;IAAA;EAAA;AAA0B;mBA5GvC;;uBA2GIC,mBAAA,CAIM,OAJNC,UAIM,GAHFC,mBAAA,CAEM,OAFNC,UAEM,GADFD,mBAAA,CAAsG;IAA9FE,EAAE,EAAC,YAAY;IAAEC,KAAK,EAAEC,KAAA,CAAAC,WAAW;IAAGC,MAAM,EAAEF,KAAA,CAAAG,YAAY;IAAEX,KAAK,EAAC;0BA7GtFY,UAAA,E","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}