{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n//import axios from 'axios';\nexport default {\n  props: {\n    gameWidth: Number,\n    gameHeight: Number\n  },\n  data() {\n    return {\n      canvasWidth: this.gameWidth,\n      canvasHeight: this.gameHeight - 176,\n      terrain: [],\n      player1: {\n        x: 120,\n        y: 440,\n        size: 40,\n        angle: 45,\n        power: 50,\n        tankColor: \"green\",\n        name: \"DJ Khaled\",\n        health: 100,\n        ammunition: [{\n          name: \"smallMissile\",\n          count: 20,\n          damage: 20,\n          radius: 30,\n          cost: 200\n        }],\n        wins: 1,\n        money: 4000,\n        fuel: 100,\n        fuelMax: 250,\n        time: 40\n      },\n      mousePosition: {\n        x: 0,\n        y: 0\n      },\n      isHovering: false,\n      aimCircleRadius: 200,\n      maxShotPower: 100,\n      stopLine: false,\n      lineStopX: 200,\n      lineStopY: 400,\n      isDragging: false,\n      wind: 0,\n      missile: null,\n      angle: 45,\n      power: 50,\n      gameOver: false,\n      fireHelpVisible: false\n    };\n  },\n  mounted() {\n    //this.wind = 0;//Math.floor(Math.random() * 100 - 50);\n    //this.player1.tankColor = \"green\"; //this.$route.query.color;\n    this.startTimer();\n    this.generateTerrain();\n    this.renderGame();\n    window.addEventListener('keydown', this.onKeyPressed);\n  },\n  methods: {\n    showFireHelp() {\n      this.fireHelpVisible = true;\n    },\n    hideFireHelp() {\n      this.fireHelpVisible = false;\n    },\n    backToMenu() {\n      this.$router.push('/');\n    },\n    drawPlayerNames(ctx) {\n      ctx.save();\n\n      //size of rectangles for healthbars\n      const player1X = 10 + 200 / 2;\n      const player2X = 1070 + 200 / 2;\n      ctx.font = \"28px Montserrat\";\n      ctx.fillStyle = \"black\";\n      ctx.textAlign = \"center\";\n      ctx.textBaseline = \"middle\";\n      ctx.fillText(this.player1.name, player1X, 30);\n      ctx.fillText(\"Player 2\", player2X, 30);\n      ctx.restore();\n    },\n    drawPlayerHealth(ctx) {\n      ctx.save();\n      ctx.fillStyle = 'black'; // White color\n      ctx.fillRect(10, 50, 200, 40);\n      ctx.fillRect(1070, 50, 200, 40);\n\n      // Draw red fill\n      ctx.fillStyle = '#FF0000'; // Red color\n      ctx.fillRect(10, 50, 180, 40); // Adjusted for border thickness\n      ctx.fillRect(1070, 50, 180, 40); // Adjusted for border thickness\n\n      //Draw outline\n      ctx.strokeStyle = 'gray';\n      ctx.lineWidth = 5; // Border width\n      ctx.strokeRect(10, 50, 200, 40);\n      ctx.strokeRect(1070, 50, 200, 40);\n      ctx.fillStyle = '#000000'; // Text color\n      ctx.font = '20px Montserrat';\n      ctx.textAlign = 'center';\n      ctx.textBaseline = 'middle';\n      ctx.fillText('80/100', 110, 70);\n      ctx.fillText('80/100', 1170, 70);\n      ctx.restore();\n    },\n    drawWind(ctx) {\n      ctx.save();\n      ctx.fillStyle = 'black'; // Text color\n      ctx.font = 'bold 20px Montserrat';\n      ctx.textAlign = 'center';\n      ctx.textBaseline = 'middle';\n      ctx.fillText('Wind: ', 600, 20);\n      ctx.fillText(this.wind, 639, 20);\n      ctx.restore();\n    },\n    drawAnglePower(ctx) {\n      ctx.save();\n      ctx.fillStyle = \"black\";\n      ctx.font = \"bold 20px Montserrat\";\n      ctx.textAlign = \"center\";\n      ctx.textBaseline = \"middle\";\n      // ctx.fillText(`Angle: ${this.angle}°`, this.player1.x, this.player1.y - 50);\n      // ctx.fillText(`Power: ${this.power}`, this.player1.x + 10, this.player1.y - 50);\n      ctx.fillText(`${Math.round(this.angle)}°,`, this.player1.x - 10, this.player1.y - 180);\n      ctx.fillText(this.power, this.player1.x + 26, this.player1.y - 180);\n      ctx.restore();\n    },\n    startTimer() {\n      setInterval(() => {\n        if (this.player1.time > 0) {\n          this.player1.time--;\n        } else {\n          this.gameOver = true;\n        }\n      }, 1000);\n    },\n    generateTerrain() {\n      // Generate a simple random terrain within 2/3 of the canvas height\n      const maxTerrainHeight = this.canvasHeight * 2 / 3;\n      this.terrain = new Array(this.canvasWidth).fill(0).map((_, x) => {\n        const baseHeight = maxTerrainHeight; // Base height is 2/3 of the canvas height\n        const variation = Math.sin(x * 0.06) * 15 + Math.sin(x * 0.1) * 10 + Math.sin(x * 0.01) * 50;\n        return baseHeight + variation;\n      });\n    },\n    fireMissile() {\n      const ammunition = this.player1.ammunition[0].count;\n      if (ammunition <= 0) {\n        return;\n      }\n      this.player1.ammunition[0].count--;\n      const startX = this.player1.x;\n      const startY = this.player1.y - 15; //this.terrain[Math.floor(player.x)] - player.size / 2\n      const controlX = startX + Math.cos(this.angle * (Math.PI / 180)) * this.power * 10 + this.wind * 4;\n      const controlY = startY - Math.sin(this.angle * (Math.PI / 180)) * this.power * 10;\n      const endX = controlX + Math.cos(this.angle * (Math.PI / 180)) * this.power * 10 + this.wind * 8;\n      const endY = this.canvasHeight;\n      this.missile = {\n        t: 0,\n        startX,\n        startY,\n        controlX,\n        controlY,\n        endX,\n        endY\n      };\n      this.animateMissile();\n    },\n    animateMissile() {\n      if (!this.missile) return;\n      const {\n        t,\n        startX,\n        startY,\n        controlX,\n        controlY,\n        endX,\n        endY\n      } = this.missile;\n      const x = (1 - t) * (1 - t) * startX + 2 * (1 - t) * t * controlX + t * t * endX;\n      const y = (1 - t) * (1 - t) * startY + 2 * (1 - t) * t * controlY + t * t * endY;\n      this.missile.t += 0.01;\n      if (this.missile.t >= 1 || this.checkTerrainCollision(x, y)) {\n        this.explodeTerrain(x, y);\n        this.missile = null;\n        return;\n      }\n      this.renderGame();\n      const canvas = this.$refs.gameCanvas;\n      const ctx = canvas.getContext(\"2d\");\n      ctx.beginPath();\n      ctx.arc(x, y, 5, 0, 2 * Math.PI);\n      ctx.fillStyle = \"red\";\n      ctx.fill();\n      requestAnimationFrame(this.animateMissile);\n    },\n    checkTerrainCollision(x, y) {\n      // Check if the missile hit the terrain\n      return y >= this.terrain[Math.floor(x)];\n    },\n    explodeTerrain(x, y) {\n      // Create a circular explosion in the terrain\n      const explosionRadius = this.player1.ammunition[0].radius;\n      for (let i = -explosionRadius; i <= explosionRadius; i++) {\n        const pos = Math.floor(x) + i;\n        if (pos >= 0 && pos < this.canvasWidth) {\n          const distance = Math.sqrt(i * i);\n          if (distance <= explosionRadius) {\n            const impactDepth = Math.sqrt(explosionRadius * explosionRadius - distance * distance);\n            this.terrain[pos] = Math.max(this.terrain[pos], y + impactDepth);\n          }\n        }\n      }\n      this.renderGame();\n      this.wind = 0; // Math.floor(Math.random() * 100 - 50);\n    },\n    renderGame() {\n      const canvas = this.$refs.gameCanvas;\n      const ctx = canvas.getContext(\"2d\");\n      ctx.clearRect(0, 0, this.canvasWidth, this.canvasHeight);\n\n      // Draw the terrain\n      // this.drawTerrain(ctx);\n\n      // Draw player 1's tank\n      // this.drawTank(ctx, this.player1);\n\n      // //Draw wind\n      // this.drawWind(ctx);\n\n      // //Draw player names\n      // this.drawPlayerNames(ctx);\n\n      // //Draw player health\n      // this.drawPlayerHealth(ctx);\n\n      // Draw the aiming circle\n      this.drawAimCircle(this.player1);\n    },\n    drawTerrain(ctx) {\n      ctx.beginPath();\n      ctx.moveTo(0, this.canvasHeight);\n      for (let x = 0; x < this.terrain.length; x++) {\n        ctx.lineTo(x, this.terrain[x]);\n      }\n      ctx.lineTo(this.canvasWidth, this.canvasHeight);\n      ctx.closePath();\n      ctx.fillStyle = \"saddlebrown\";\n      ctx.fill();\n    },\n    onKeyPressed(event) {\n      if (event.key === 'ArrowRight') {\n        if (this.player1.fuel > 0 && this.player1.x < this.canvasWidth - 5) {\n          this.player1.fuel -= 5;\n          this.player1.x += 5;\n          this.lineStopX += 5;\n        }\n      } else if (event.key === 'ArrowLeft') {\n        if (this.player1.fuel > 0 && this.player1.x > 5) {\n          this.player1.fuel -= 5;\n          this.player1.x -= 5;\n          this.lineStopX -= 5;\n        }\n      }\n      this.renderGame();\n    },\n    onMouseDown(event) {\n      const rect = this.$refs.gameCanvas.getBoundingClientRect();\n      this.mousePosition.x = event.clientX - rect.left;\n      this.mousePosition.y = event.clientY - rect.top;\n\n      // Check if the click is within the aim circle\n      if (this.isHovering) {\n        this.isDragging = true; // Start dragging\n        this.lineStopX = this.mousePosition.x; // Initialize line stop positions\n        this.lineStopY = this.mousePosition.y;\n      }\n    },\n    onMouseUp() {\n      this.isDragging = false; // Stop dragging\n    },\n    onMouseMove(event) {\n      const rect = this.$refs.gameCanvas.getBoundingClientRect();\n      this.mousePosition.x = event.clientX - rect.left;\n      this.mousePosition.y = event.clientY - rect.top;\n      const dx = this.mousePosition.x - this.player1.x;\n      const dy = this.mousePosition.y - this.player1.y;\n      const distance = Math.sqrt(dx * dx + dy * dy);\n      if (this.isDragging) {\n        // Cap the power line's length to the circle radius\n        const clampedDistance = Math.min(distance, this.aimCircleRadius);\n        this.power = Math.round(clampedDistance / this.aimCircleRadius * this.maxShotPower);\n\n        // Update the line end positions\n        const angle = Math.atan2(dy, dx);\n        this.lineStopX = this.player1.x + clampedDistance * Math.cos(angle);\n        this.lineStopY = this.player1.y + clampedDistance * Math.sin(angle);\n        this.angle = -(angle * 180) / Math.PI;\n      }\n\n      // const dx = this.mousePosition.x - this.player1.x;\n      // const dy = this.mousePosition.y - this.player1.y;\n      // const distance = Math.sqrt(dx * dx + dy * dy);\n\n      // Show the aiming UI if the mouse is within the aiming circle range\n      this.isHovering = distance >= 1 && distance <= this.aimCircleRadius;\n      if (this.isHovering) {\n        //Calculate the angle between the tank and the mouse\n        if (!this.stopLine && this.isDragging) {\n          this.angle = -(Math.atan2(dy, dx) * 180) / Math.PI;\n        }\n        this.drawAimCircle(this.player1);\n      }\n    },\n    onMouseClick(event) {\n      console.log(\"Clicked insideee the aim circle!\"); // Debug message\n      const rect = this.$refs.gameCanvas.getBoundingClientRect();\n      this.mousePosition.x = event.clientX - rect.left;\n      this.mousePosition.y = event.clientY - rect.top;\n      const dx = this.mousePosition.x - this.player1.x;\n      const dy = this.mousePosition.y - this.player1.y;\n      const distance = Math.sqrt(dx * dx + dy * dy);\n\n      // Show the aiming UI if the mouse is within the aiming circle range\n      this.isHovering = distance >= 1 && distance <= this.aimCircleRadius;\n      if (this.isHovering) {\n        this.angle = -(Math.atan2(dy, dx) * 180) / Math.PI;\n        this.power = Math.round(distance / this.aimCircleRadius * this.maxShotPower);\n        this.stopLine = true;\n        this.stopLineX = this.mousePosition.x;\n        this.stopLineY = this.mousePosition.y;\n        this.drawAimCircle(this.player1);\n      }\n    },\n    drawTank(ctx, player) {\n      ctx.save();\n      this.player1.y = this.terrain[Math.floor(player.x)] - player.size / 2;\n      ctx.translate(player.x, this.player1.y);\n\n      // Draw the tank body\n      ctx.fillStyle = this.player1.tankColor;\n      ctx.fillRect(-player.size / 2, -player.size / 4, player.size, player.size / 2);\n\n      // Draw the tank turret\n      const turretLength = player.size * 0.7;\n      ctx.translate(0, -player.size / 7);\n      ctx.rotate(-this.angle * Math.PI / 180);\n      ctx.fillStyle = this.player1.tankColor;\n      ctx.fillRect(0, -5, turretLength, 10);\n      ctx.restore();\n    },\n    drawAimCircle(player) {\n      // Get the canvas context\n      const canvas = this.$refs.gameCanvas;\n      const ctx = canvas.getContext('2d');\n      ctx.clearRect(0, 0, this.canvasWidth, this.canvasHeight);\n\n      // Draw the terrain\n      this.drawTerrain(ctx);\n\n      // Draw player 1's tank\n      this.drawTank(ctx, this.player1);\n\n      //Draw player names\n      this.drawPlayerNames(ctx);\n\n      //Draw player health\n      this.drawPlayerHealth(ctx);\n      this.drawWind(ctx);\n      this.drawAnglePower(ctx);\n      const x = player.x;\n      const y = player.y;\n      ctx.beginPath();\n      ctx.arc(x, y, this.aimCircleRadius, 0, 2 * Math.PI);\n      // Fill the circle with a semi-transparent color\n      ctx.fillStyle = 'rgba(128, 128, 128, 0.5)';\n      ctx.fill(); // Fill first to apply transparency correctly\n\n      // Stroke the border of the circle\n      ctx.strokeStyle = \"black\";\n      ctx.stroke();\n\n      // Draw the power/shot line\n      ctx.beginPath();\n      ctx.moveTo(x, y);\n      ctx.lineTo(this.lineStopX, this.lineStopY); // Use the updated stop positions\n      ctx.strokeStyle = \"red\";\n      ctx.stroke();\n    }\n  }\n};","map":{"version":3,"names":["props","gameWidth","Number","gameHeight","data","canvasWidth","canvasHeight","terrain","player1","x","y","size","angle","power","tankColor","name","health","ammunition","count","damage","radius","cost","wins","money","fuel","fuelMax","time","mousePosition","isHovering","aimCircleRadius","maxShotPower","stopLine","lineStopX","lineStopY","isDragging","wind","missile","gameOver","fireHelpVisible","mounted","startTimer","generateTerrain","renderGame","window","addEventListener","onKeyPressed","methods","showFireHelp","hideFireHelp","backToMenu","$router","push","drawPlayerNames","ctx","save","player1X","player2X","font","fillStyle","textAlign","textBaseline","fillText","restore","drawPlayerHealth","fillRect","strokeStyle","lineWidth","strokeRect","drawWind","drawAnglePower","Math","round","setInterval","maxTerrainHeight","Array","fill","map","_","baseHeight","variation","sin","fireMissile","startX","startY","controlX","cos","PI","controlY","endX","endY","t","animateMissile","checkTerrainCollision","explodeTerrain","canvas","$refs","gameCanvas","getContext","beginPath","arc","requestAnimationFrame","floor","explosionRadius","i","pos","distance","sqrt","impactDepth","max","clearRect","drawAimCircle","drawTerrain","moveTo","length","lineTo","closePath","event","key","onMouseDown","rect","getBoundingClientRect","clientX","left","clientY","top","onMouseUp","onMouseMove","dx","dy","clampedDistance","min","atan2","onMouseClick","console","log","stopLineX","stopLineY","drawTank","player","translate","turretLength","rotate","stroke"],"sources":["/home/antiphy/ITU/ITU_project/src/views/GameScreen.vue"],"sourcesContent":["<template>\n  <div :style=\"{ width: `${gameWidth}px`, height: `${gameHeight}px`}\">\n    <div>\n      <div class=\"h-44 bg-opacity-80 bg-neutral-900 text-white items-center justify-center flex flex-rows space-x-6\">\n        <!-- style=\"background: url('assets/metalbg.png') no-repeat center center; background-size: cover; width: 1280px;\"> -->\n\n        <div class=\"flex flex-col space-y-1\">\n          <div>\n            <button\n              mouseover=\"showFireHelp\"\n              @mouseleave=\"hideFireHelp\"\n              @click=\"fireMissile\"\n              class=\"ml-4 h-16 bg-blue-300 bg-opacity-50 text-black rounded-lg border-4 border-black hover:bg-blue-400 font-bold text-4xl\">\n              WEAPON SELECTOR\n            </button>\n          </div>\n\n          <div>\n            <button\n              class=\"ml-4 h-16 bg-gray-300 bg-opacity-50 rounded-lg border-4 border-black hover:bg-gray-400\">\n              <div class=\"flex flex-row justify-center space-x-4\">\n                <div class=\"text-black font-bold text-3xl\">SMALL MISSILE</div>\n                <div class=\"w-8 h-8\" style=\"background: url('assets/small_missile_icon.png') no-repeat center center; background-size: cover;\"></div>\n                <div class=\"text-black font-bold text-3xl\">{{ player1.ammunition[0].count }}</div>\n              </div>\n\n            </button>\n          </div>\n      </div>\n\n        <div class=\"relative\">\n          <button\n              @mouseover=\"showFireHelp\"\n              @mouseleave=\"hideFireHelp\"\n              @click=\"fireMissile\"\n              class=\"w-80 py-16 bg-red-300 bg-opacity-50 text-black rounded-lg border-4 border-black hover:bg-red-400 font-bold text-4xl\">\n              FIRE\n            <span v-if=\"fireHelpVisible\" class=\"absolute top-0 left-0 right-0 bottom-0 bg-black bg-opacity-50 flex justify-center items-center text-white text-2xl\">\n              Click to fire!\n            </span>\n          </button>\n        </div>\n\n        <!-- Row flex for money, time and so on -->\n        <div class =\"flex flex-rows space-x-8\">\n\n          <div class =\"flex flex-col space-y-4\">\n            <div class=\"font-bold text-white text-2xl\">\n              <h1>{{ player1.time }} (s)</h1>\n            </div>\n            <div class = \"w-16 h-16\" style=\"background: url('assets/time_icon.png') no-repeat center center; background-size: cover;\"></div>\n          </div>\n\n          <div class =\"flex flex-col space-y-2\">\n            <div class=\"font-bold text-white text-2xl\">\n              <h1>{{ player1.money }}$</h1>\n            </div>\n            <div class = \"w-20 h-20\" style=\"background: url('assets/money_bag_icon.png') no-repeat center center; background-size: cover;\"></div>\n          </div>\n\n          <div class =\"flex flex-col space-y-2, items-center\">\n            <div class=\"font-bold text-white text-2xl\">\n              <h1>{{ player1.fuel }}/{{ player1.fuelMax }}</h1>\n            </div>\n            <div class = \"w-20 h-20\" style=\"background: url('assets/fuel_icon.png') no-repeat center center; background-size: cover;\"></div>\n          </div>\n\n          <div class =\"flex flex-col space-y-3\">\n            <div class=\"font-bold text-white text-2xl\">\n              <h1>{{ player1.wins }}win</h1>\n            </div>\n            <div class = \"w-16 h-16\" style=\"background: url('assets/trophy_icon.png') no-repeat center center; background-size: cover;\"></div>\n          </div>\n\n        </div>\n\n        <!-- Pause button, absolute position from the bar-->\n        <div class=\"relative mb-16\">\n          <div class=\"w-20 h-20\" style=\"background: url('assets/pause_icon.png') no-repeat center center; background-size: cover;\"></div>\n        </div>\n      </div>\n    </div>\n\n    <div>\n      <canvas\n        ref=\"gameCanvas\"\n        :width=\"canvasWidth\"\n        :height=\"canvasHeight\"\n        class=\"border border-gray-700 m-auto\"\n        @mousemove=\"onMouseMove\"\n        @click=\"onMouseClick\"\n        @mouseleave=\"onMouseLeave\"\n        @mouseup=\"onMouseUp\"\n        @mousedown=\"onMouseDown\"\n      ></canvas>\n    </div>\n    <div v-if=\"gameOver\" class=\"absolute inset-0 flex flex-col space-y-2 items-center justify-center bg-black bg-opacity-50\">\n        <h1 class=\"text-4xl font-bold\">Game Over!</h1>\n        <button @click=\"backToMenu\" class=\"border-4 border-sky-700 text-center bg-sky-300 hover:bg-sky-400 font-bold text-xl py-4 px-32 rounded-2xl mt-4 justify-center items-center\">\n          Back to Menu\n        </button>\n\n    </div>\n  </div>\n</template>\n\n  <script>\n  //import axios from 'axios';\n  export default {\n    props: {\n      gameWidth: Number,\n      gameHeight: Number,\n    },\n    data() {\n      return {\n        canvasWidth: this.gameWidth,\n        canvasHeight: this.gameHeight - 176,\n        terrain: [],\n        player1: {\n          x: 120,\n          y: 440,\n          size: 40,\n          angle: 45,\n          power: 50,\n          tankColor: \"green\",\n          name: \"DJ Khaled\",\n          health: 100,\n          ammunition: [\n            {\n              name: \"smallMissile\",\n              count: 20,\n              damage: 20,\n              radius: 30,\n              cost: 200,\n            },\n          ],\n          wins: 1,\n          money: 4000,\n          fuel: 100,\n          fuelMax: 250,\n          time: 40,\n\n        },\n        mousePosition: {\n          x: 0,\n          y: 0,\n        },\n        isHovering: false,\n        aimCircleRadius: 200,\n        maxShotPower: 100,\n        stopLine: false,\n        lineStopX: 200,\n        lineStopY: 400,\n        isDragging: false,\n\n        wind: 0,\n        missile: null,\n        angle: 45,\n        power: 50,\n        gameOver: false,\n        fireHelpVisible: false,\n      };\n    },\n    mounted() {\n      //this.wind = 0;//Math.floor(Math.random() * 100 - 50);\n      //this.player1.tankColor = \"green\"; //this.$route.query.color;\n      this.startTimer();\n      this.generateTerrain();\n      this.renderGame();\n      window.addEventListener('keydown', this.onKeyPressed);\n    },\n    methods: {\n      showFireHelp() {\n        this.fireHelpVisible = true;\n      },\n      hideFireHelp() {\n        this.fireHelpVisible = false;\n      },\n\n      backToMenu() {\n        this.$router.push('/');\n      },\n\n      drawPlayerNames(ctx) {\n        ctx.save();\n\n        //size of rectangles for healthbars\n        const player1X = 10 + 200 / 2;\n        const player2X = 1070 + 200 / 2;\n\n        ctx.font = \"28px Montserrat\";\n        ctx.fillStyle = \"black\";\n        ctx.textAlign = \"center\";\n        ctx.textBaseline = \"middle\";\n        ctx.fillText(this.player1.name, player1X, 30);\n        ctx.fillText(\"Player 2\", player2X, 30);\n        ctx.restore();\n      },\n\n      drawPlayerHealth(ctx){\n        ctx.save();\n\n        ctx.fillStyle = 'black'; // White color\n        ctx.fillRect(10, 50, 200, 40);\n\n        ctx.fillRect(1070, 50, 200, 40);\n\n        // Draw red fill\n        ctx.fillStyle = '#FF0000'; // Red color\n        ctx.fillRect(10, 50, 180, 40); // Adjusted for border thickness\n        ctx.fillRect(1070, 50, 180, 40); // Adjusted for border thickness\n\n        //Draw outline\n        ctx.strokeStyle = 'gray';\n        ctx.lineWidth = 5; // Border width\n        ctx.strokeRect(10, 50, 200, 40);\n        ctx.strokeRect(1070, 50, 200, 40);\n\n        ctx.fillStyle = '#000000'; // Text color\n        ctx.font = '20px Montserrat';\n        ctx.textAlign = 'center';\n        ctx.textBaseline = 'middle';\n        ctx.fillText('80/100', 110, 70);\n        ctx.fillText('80/100', 1170, 70);\n\n        ctx.restore();\n      },\n\n      drawWind(ctx){\n        ctx.save();\n\n        ctx.fillStyle = 'black'; // Text color\n        ctx.font = 'bold 20px Montserrat';\n        ctx.textAlign = 'center';\n        ctx.textBaseline = 'middle';\n        ctx.fillText('Wind: ', 600, 20);\n        ctx.fillText(this.wind, 639, 20);\n\n        ctx.restore();\n      },\n\n      drawAnglePower(ctx) {\n        ctx.save();\n        ctx.fillStyle = \"black\";\n        ctx.font = \"bold 20px Montserrat\";\n        ctx.textAlign = \"center\";\n        ctx.textBaseline = \"middle\";\n        // ctx.fillText(`Angle: ${this.angle}°`, this.player1.x, this.player1.y - 50);\n        // ctx.fillText(`Power: ${this.power}`, this.player1.x + 10, this.player1.y - 50);\n        ctx.fillText(`${Math.round(this.angle)}°,`, this.player1.x - 10, this.player1.y - 180);\n        ctx.fillText(this.power, this.player1.x + 26, this.player1.y - 180);\n        ctx.restore();\n      },\n\n      startTimer() {\n        setInterval(() => {\n          if (this.player1.time > 0) {\n            this.player1.time--;\n          } else {\n            this.gameOver = true;\n          }\n        }, 1000);\n      },\n\n      generateTerrain() {\n        // Generate a simple random terrain within 2/3 of the canvas height\n        const maxTerrainHeight = (this.canvasHeight * 2) / 3;\n        this.terrain = new Array(this.canvasWidth).fill(0).map((_, x) => {\n          const baseHeight = maxTerrainHeight; // Base height is 2/3 of the canvas height\n          const variation = Math.sin(x * 0.06) * 15 + Math.sin(x * 0.1) * 10 + Math.sin(x * 0.01) * 50;\n          return baseHeight + variation;\n        });\n      },\n\n      fireMissile() {\n        const ammunition = this.player1.ammunition[0].count;\n        if(ammunition <= 0){\n          return;\n        }\n        this.player1.ammunition[0].count--;\n        const startX = this.player1.x;\n        const startY = this.player1.y - 15; //this.terrain[Math.floor(player.x)] - player.size / 2\n        const controlX = startX + Math.cos(this.angle * (Math.PI / 180)) * this.power * 10 + this.wind * 4;\n        const controlY = startY - Math.sin(this.angle * (Math.PI / 180)) * this.power * 10;\n        const endX = controlX + Math.cos(this.angle * (Math.PI / 180)) * this.power * 10 + this.wind * 8;\n        const endY = this.canvasHeight;\n\n        this.missile = {\n          t: 0,\n          startX,\n          startY,\n          controlX,\n          controlY,\n          endX,\n          endY,\n        };\n\n        this.animateMissile();\n      },\n      animateMissile() {\n        if (!this.missile) return;\n\n        const { t, startX, startY, controlX, controlY, endX, endY } = this.missile;\n\n        const x = (1 - t) * (1 - t) * startX + 2 * (1 - t) * t * controlX + t * t * endX;\n        const y = (1 - t) * (1 - t) * startY + 2 * (1 - t) * t * controlY + t * t * endY;\n\n        this.missile.t += 0.01;\n        if (this.missile.t >= 1 || this.checkTerrainCollision(x, y)) {\n          this.explodeTerrain(x, y);\n          this.missile = null;\n          return;\n        }\n\n        this.renderGame();\n\n        const canvas = this.$refs.gameCanvas;\n        const ctx = canvas.getContext(\"2d\");\n        ctx.beginPath();\n        ctx.arc(x, y, 5, 0, 2 * Math.PI);\n        ctx.fillStyle = \"red\";\n        ctx.fill();\n\n        requestAnimationFrame(this.animateMissile);\n      },\n      checkTerrainCollision(x, y) {\n        // Check if the missile hit the terrain\n        return y >= this.terrain[Math.floor(x)];\n      },\n      explodeTerrain(x, y) {\n        // Create a circular explosion in the terrain\n        const explosionRadius = this.player1.ammunition[0].radius;\n        for (let i = -explosionRadius; i <= explosionRadius; i++) {\n          const pos = Math.floor(x) + i;\n          if (pos >= 0 && pos < this.canvasWidth) {\n            const distance = Math.sqrt(i * i);\n            if (distance <= explosionRadius) {\n              const impactDepth = Math.sqrt(explosionRadius * explosionRadius - distance * distance);\n              this.terrain[pos] = Math.max(this.terrain[pos], y + impactDepth);\n            }\n          }\n        }\n        this.renderGame();\n        this.wind = 0;// Math.floor(Math.random() * 100 - 50);\n\n      },\n      renderGame() {\n        const canvas = this.$refs.gameCanvas;\n        const ctx = canvas.getContext(\"2d\");\n        ctx.clearRect(0, 0, this.canvasWidth, this.canvasHeight);\n\n        // Draw the terrain\n        // this.drawTerrain(ctx);\n\n        // Draw player 1's tank\n        // this.drawTank(ctx, this.player1);\n\n        // //Draw wind\n        // this.drawWind(ctx);\n\n        // //Draw player names\n        // this.drawPlayerNames(ctx);\n\n        // //Draw player health\n        // this.drawPlayerHealth(ctx);\n\n        // Draw the aiming circle\n        this.drawAimCircle(this.player1);\n\n      },\n      drawTerrain(ctx) {\n        ctx.beginPath();\n        ctx.moveTo(0, this.canvasHeight);\n        for (let x = 0; x < this.terrain.length; x++) {\n          ctx.lineTo(x, this.terrain[x]);\n        }\n        ctx.lineTo(this.canvasWidth, this.canvasHeight);\n        ctx.closePath();\n        ctx.fillStyle = \"saddlebrown\";\n        ctx.fill();\n      },\n\n      onKeyPressed(event){\n        if(event.key === 'ArrowRight'){\n\n          if(this.player1.fuel > 0 && this.player1.x <  this.canvasWidth - 5){\n            this.player1.fuel -= 5;\n            this.player1.x += 5;\n            this.lineStopX += 5;\n          }\n        } else if(event.key === 'ArrowLeft'){\n          if(this.player1.fuel > 0 && this.player1.x > 5){\n            this.player1.fuel -= 5;\n            this.player1.x -= 5;\n            this.lineStopX -= 5;\n          }\n        }\n        this.renderGame();\n      },\n\n      onMouseDown(event) {\n        const rect = this.$refs.gameCanvas.getBoundingClientRect();\n        this.mousePosition.x = event.clientX - rect.left;\n        this.mousePosition.y = event.clientY - rect.top;\n\n        // Check if the click is within the aim circle\n        if (this.isHovering) {\n          this.isDragging = true; // Start dragging\n          this.lineStopX = this.mousePosition.x; // Initialize line stop positions\n          this.lineStopY = this.mousePosition.y;\n        }\n      },\n\n      onMouseUp() {\n        this.isDragging = false; // Stop dragging\n      },\n\n      onMouseMove(event) {\n          const rect = this.$refs.gameCanvas.getBoundingClientRect();\n          this.mousePosition.x = event.clientX - rect.left;\n          this.mousePosition.y = event.clientY - rect.top;\n\n          const dx = this.mousePosition.x - this.player1.x;\n          const dy = this.mousePosition.y - this.player1.y;\n          const distance = Math.sqrt(dx * dx + dy * dy);\n          if (this.isDragging) {\n            // Cap the power line's length to the circle radius\n            const clampedDistance = Math.min(distance, this.aimCircleRadius);\n            this.power = Math.round((clampedDistance / this.aimCircleRadius) * this.maxShotPower);\n\n            // Update the line end positions\n            const angle = Math.atan2(dy, dx);\n            this.lineStopX = this.player1.x + clampedDistance * Math.cos(angle);\n            this.lineStopY = this.player1.y + clampedDistance * Math.sin(angle);\n            this.angle = -(angle * 180) / Math.PI;\n          }\n\n          // const dx = this.mousePosition.x - this.player1.x;\n          // const dy = this.mousePosition.y - this.player1.y;\n          // const distance = Math.sqrt(dx * dx + dy * dy);\n\n          // Show the aiming UI if the mouse is within the aiming circle range\n          this.isHovering = distance >= 1 && distance <= this.aimCircleRadius;\n\n          if (this.isHovering) {\n            //Calculate the angle between the tank and the mouse\n            if(!this.stopLine && this.isDragging){\n              this.angle = -(Math.atan2(dy, dx) * 180) / Math.PI;\n            }\n            this.drawAimCircle(this.player1);\n          }\n      },\n\n      onMouseClick(event) {\n        console.log(\"Clicked insideee the aim circle!\"); // Debug message\n        const rect = this.$refs.gameCanvas.getBoundingClientRect();\n        this.mousePosition.x = event.clientX - rect.left;\n        this.mousePosition.y = event.clientY - rect.top;\n\n        const dx = this.mousePosition.x - this.player1.x;\n        const dy = this.mousePosition.y - this.player1.y;\n        const distance = Math.sqrt(dx * dx + dy * dy);\n\n        // Show the aiming UI if the mouse is within the aiming circle range\n        this.isHovering = distance >= 1 && distance <= this.aimCircleRadius;\n\n        if (this.isHovering) {\n          this.angle = -(Math.atan2(dy, dx) * 180) / Math.PI;\n          this.power = Math.round((distance / this.aimCircleRadius) * this.maxShotPower);\n          this.stopLine = true;\n          this.stopLineX = this.mousePosition.x;\n          this.stopLineY = this.mousePosition.y;\n          this.drawAimCircle(this.player1);\n        }\n      },\n\n\n      drawTank(ctx, player) {\n\n        ctx.save();\n        this.player1.y = this.terrain[Math.floor(player.x)] - player.size / 2;\n        ctx.translate(player.x, this.player1.y);\n\n        // Draw the tank body\n        ctx.fillStyle = this.player1.tankColor;\n        ctx.fillRect(-player.size / 2, -player.size / 4, player.size, player.size / 2);\n\n        // Draw the tank turret\n        const turretLength = player.size * 0.7;\n        ctx.translate(0, -player.size / 7);\n        ctx.rotate((-this.angle * Math.PI) / 180);\n        ctx.fillStyle = this.player1.tankColor;\n        ctx.fillRect(0, -5, turretLength, 10);\n\n        ctx.restore();\n      },\n\n      drawAimCircle(player){\n\n        // Get the canvas context\n        const canvas = this.$refs.gameCanvas;\n        const ctx = canvas.getContext('2d');\n        ctx.clearRect(0, 0, this.canvasWidth, this.canvasHeight);\n\n        // Draw the terrain\n        this.drawTerrain(ctx);\n\n        // Draw player 1's tank\n        this.drawTank(ctx, this.player1);\n\n        //Draw player names\n        this.drawPlayerNames(ctx);\n\n        //Draw player health\n        this.drawPlayerHealth(ctx);\n\n        this.drawWind(ctx);\n\n        this.drawAnglePower(ctx);\n\n        const x = player.x;\n        const y = player.y;\n\n        ctx.beginPath();\n        ctx.arc(x, y, this.aimCircleRadius, 0, 2 * Math.PI);\n        // Fill the circle with a semi-transparent color\n        ctx.fillStyle = 'rgba(128, 128, 128, 0.5)';\n        ctx.fill();  // Fill first to apply transparency correctly\n\n        // Stroke the border of the circle\n        ctx.strokeStyle = \"black\";\n        ctx.stroke();\n\n        // Draw the power/shot line\n        ctx.beginPath();\n        ctx.moveTo(x, y);\n        ctx.lineTo(this.lineStopX, this.lineStopY); // Use the updated stop positions\n        ctx.strokeStyle = \"red\";\n        ctx.stroke();\n\n      },\n    },\n  };\n  </script>\n\n<style scoped>\n@import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap');\n\ncanvas {\n  font-family: 'Montserrat', sans-serif;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}