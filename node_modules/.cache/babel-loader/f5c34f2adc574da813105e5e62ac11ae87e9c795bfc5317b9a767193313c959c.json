{"ast":null,"code":"import { ref, onMounted } from 'vue';\nimport axios from 'axios';\nimport WeaponShop from './WeaponShop.vue';\nimport SkillShop from './SkillShop.vue';\nimport TankImage from './TankImage.vue';\nexport default {\n  __name: 'PlayerShopCard',\n  props: {\n    player_id: {\n      type: Number,\n      default: 0\n    },\n    side: {\n      type: String,\n      default: \"l\"\n    }\n  },\n  setup(__props, {\n    expose: __expose\n  }) {\n    const props = __props;\n\n    // Reactive reference to hold player data\n    const player = ref(null);\n    const svg = ref(null);\n\n    // Function to fetch player data\n    async function fetchPlayerData(playerId) {\n      try {\n        const response = await axios.get(`http://localhost:8000/players/${playerId}`);\n        player.value = response.data; // Set player data\n      } catch (error) {\n        console.error('Error fetching player data:', error);\n      }\n    }\n    async function fetchTankData(playerId) {\n      try {\n        const response = await axios.get(`http://localhost:8000/players/${playerId}/tank`);\n        svg.value = response.data; // Set the SVG data\n      } catch (error) {\n        console.error('Error fetching tank data:', error);\n      }\n    }\n\n    // Lifecycle hook to fetch player data when the component is mounted\n    onMounted(() => {\n      // Change this to the desired player ID\n      fetchPlayerData(props.player_id);\n      fetchTankData(props.player_id);\n    });\n    function updatePoints(usedPoints, name) {\n      if (name === \"Armor\") {\n        player.value.armor -= usedPoints;\n      } else if (name === \"Power\") {\n        player.value.power -= usedPoints;\n      } else if (name === \"Speed\") {\n        player.value.speed -= usedPoints;\n      }\n      player.value.skillPoints += usedPoints;\n    }\n    function updateCash(cash, name, quantity) {\n      player.value.money = cash;\n      if (name === \"Striker\") {\n        player.value.weapon1 = quantity;\n      } else if (name === \"Devastator\") {\n        player.value.weapon2 = quantity;\n      } else if (name === \"Phantom\") {\n        player.value.weapon3 = quantity;\n      }\n    }\n    __expose({\n      savePlayer\n    });\n    function savePlayer() {\n      console.log(\"Money\", player.value.money);\n      console.log(\"W1:\", player.value.weapon1);\n      console.log(\"W2:\", player.value.weapon2);\n      console.log(\"W3:\", player.value.weapon3);\n      console.log(\"Armor:\", player.value.armor);\n      console.log(\"Power:\", player.value.power);\n      console.log(\"Speed:\", player.value.speed);\n      console.log(\"Free Pts:\", player.value.skillPoints);\n    }\n    const __returned__ = {\n      props,\n      player,\n      svg,\n      fetchPlayerData,\n      fetchTankData,\n      updatePoints,\n      updateCash,\n      savePlayer,\n      ref,\n      onMounted,\n      get axios() {\n        return axios;\n      },\n      WeaponShop,\n      SkillShop,\n      TankImage\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","axios","WeaponShop","SkillShop","TankImage","props","__props","player","svg","fetchPlayerData","playerId","response","get","value","data","error","console","fetchTankData","player_id","updatePoints","usedPoints","name","armor","power","speed","skillPoints","updateCash","cash","quantity","money","weapon1","weapon2","weapon3","__expose","savePlayer","log"],"sources":["/home/antiphy/ITU/ITU_project/src/components/Shop/PlayerShopCard.vue"],"sourcesContent":["<script setup>\nimport {defineProps, ref, onMounted, defineExpose} from 'vue';\nimport axios from 'axios';\nimport WeaponShop from './WeaponShop.vue';\nimport SkillShop from './SkillShop.vue';\nimport TankImage from './TankImage.vue';\n\nconst props = defineProps({\n  player_id:{\n    type: Number,\n    default: 0\n  },\n  side:{\n    type: String,\n    default: \"l\"\n  }\n});\n\n// Reactive reference to hold player data\nconst player = ref(null);\nconst svg = ref(null)\n\n// Function to fetch player data\nasync function fetchPlayerData(playerId) {\n  try {\n    const response = await axios.get(`http://localhost:8000/players/${playerId}`);\n    player.value = response.data; // Set player data\n  } catch (error) {\n    console.error('Error fetching player data:', error);\n  }\n}\n\nasync function fetchTankData(playerId){\n      try {\n        const response = await axios.get(`http://localhost:8000/players/${playerId}/tank`);\n        svg.value = response.data; // Set the SVG data\n      } catch (error) {\n        console.error('Error fetching tank data:', error);\n      }\n}\n\n// Lifecycle hook to fetch player data when the component is mounted\nonMounted(() => {\n   // Change this to the desired player ID\n  fetchPlayerData(props.player_id);\n  fetchTankData(props.player_id);\n});\n\nfunction updatePoints(usedPoints, name) {\n  if(name === \"Armor\"){\n    player.value.armor -= usedPoints;\n    \n  } else if(name === \"Power\"){\n    player.value.power -= usedPoints;\n    \n  } else if(name === \"Speed\"){\n    player.value.speed -= usedPoints;\n  \n  }\n  player.value.skillPoints += usedPoints;\n}\n\nfunction updateCash(cash, name, quantity) {\n  player.value.money = cash;\n  if(name === \"Striker\"){\n    player.value.weapon1 = quantity;\n \n  } else if(name === \"Devastator\"){\n    player.value.weapon2 = quantity;\n    \n  } else if(name === \"Phantom\"){\n    player.value.weapon3 = quantity;\n    \n  }\n}\n\ndefineExpose({\n  savePlayer\n});\n\nfunction savePlayer() {\n  console.log(\"Money\",player.value.money);\n  console.log(\"W1:\",player.value.weapon1);\n  console.log(\"W2:\",player.value.weapon2);\n  console.log(\"W3:\",player.value.weapon3);\n  console.log(\"Armor:\",player.value.armor);\n  console.log(\"Power:\",player.value.power);\n  console.log(\"Speed:\",player.value.speed);\n  console.log(\"Free Pts:\",player.value.skillPoints);\n\n\n}\n\n</script>\n<template>\n    \n        <div class=\"flex flex-col justify-center items-center\">\n          <div v-if=\"props.side == 'l'\" class=\"flex flex-col justify-between h-52 w-full\">\n            <div class=\"text-6xl font-black self-center\">\n              {{ player ? player.name : 'Loading...' }}\n            </div>\n            <TankImage :svg=\"svg\" class=\"self-end \"></TankImage>\n          </div>\n          <div v-else class=\"flex flex-col-reverse justify-between h-52 w-full\">\n            <TankImage :svg=\"svg\" class=\"self-start flip\"></TankImage>    \n            <div class=\"text-6xl font-black self-center\">\n              {{ player ? player.name : 'Loading...' }}\n            </div>\n          </div>\n\n            <div v-if=\"player\">\n                <WeaponShop class=\"mb-14\" :weapon=\"player.weapon\" :weapon1=\"player.weapon1\" :weapon2=\"player.weapon2\" :weapon3=\"player.weapon3\" :cash=\"player.money\" @updateCash=\"updateCash\"></WeaponShop>\n                <SkillShop  :armor=\"player.armor\" :power=\"player.power\" :speed=\"player.speed\" :skillPoints=\"player.skillPoints\" @updatePoints=\"updatePoints\"></SkillShop>\n                \n            </div>\n            <div @click=\"savePlayer\" v-else>Loading player data...</div>\n        </div>\n</template>\n\n<style scoped>\n/* CSS to flip the div along the Y-axis */\n.flip {\n  transform: scaleX(-1);\n  /* Optional: If you want to maintain the same direction of text */\n  direction: rtl; \n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}